(self.webpackChunkdevpn_web=self.webpackChunkdevpn_web||[]).push([[1160],{428:function(re,p,u){"use strict";u.r(p);var d=u(39428),f=u(3182),se=u(17462),O=u(76772),R=u(91220),te=u(34792),m=u(48086),c=u(94657),ae=u(57106),T=u(99683),ne=u(57663),U=u(71577),_e=u(402),y=u(39602),B=u(67294),D=u(65554),E=u(5966),L=u(64317),I=u(19611),M=u(62305),W=u(29791),h=u(42122),K=u(86330),o=u.n(K),x=u(57895),S=u(59271),b=u(89832),e=u(85893),C=y.Z.Text,N=/^[\w\.\-]{6,24}$/,V=/^[A-Za-z0-9._%-]+@[A-Za-z0-9\.\-]+\.[A-Za-z]+$/,$=function(P){return(0,e.jsx)(T.ZP,{status:"success",title:"\u64CD\u4F5C\u6210\u529F",subTitle:"\u8BF7\u4F7F\u7528\u65B0\u5BC6\u7801\u767B\u5F55\u7CFB\u7EDF",extra:(0,e.jsx)(U.Z,{type:"primary",onClick:P.onFinish,children:"\u767B\u5F55"}),className:o().result,children:P.children})},G=function(){var P=(0,B.useState)({}),F=(0,c.Z)(P,2),l=F[0],z=F[1],H=(0,B.useState)(0),A=(0,c.Z)(H,2),Q=A[0],J=A[1],X=(0,B.useState)("default"),g=(0,c.Z)(X,2),j=g[0],v=g[1],Y=(0,B.useState)(),Z=(0,c.Z)(Y,2),n=Z[0],k=Z[1],q=function(){(0,h.xx)().then(function(s){k(s)}).catch(function(){m.ZP.error("\u83B7\u53D6\u4EBA\u673A\u9A8C\u8BC1\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5")})},ee=function(s){if(s.length<1||!n){m.ZP.error("\u8BF7\u8FDB\u884C\u4EBA\u673A\u9A8C\u8BC1\u518D\u63D0\u4EA4");return}var r=[],i=(0,R.Z)(s),a;try{for(i.s();!(a=i.n()).done;){var t=a.value;r.push(t.x),r.push(t.y)}}catch(ue){i.e(ue)}finally{i.f()}v("check"),(0,h.N$)({dots:r,key:n.key}).then(function(){v("success")}).catch(function(){v("error"),m.ZP.error("\u4EBA\u673A\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")})};return(0,e.jsxs)("div",{className:o().container,children:[(0,e.jsx)(I.rU,{className:o().home,to:"/",title:"\u8FD4\u56DE\u9996\u9875",children:(0,e.jsx)(S.Z,{className:o().icon})}),(0,e.jsx)("div",{className:o().lang,"data-lang":!0,children:M.pD&&(0,e.jsx)(M.pD,{})}),(0,e.jsx)("div",{className:o().content,children:(0,e.jsxs)(x.ZP,{children:[(0,e.jsx)(O.Z,{message:"\u53EA\u9488\u5BF9\u586B\u5199\u4E86\u90AE\u7BB1\u5730\u5740\u6216\u8005\u5BC6\u7801\u95EE\u9898\u7B54\u6848\u7684\u7528\u6237\uFF0C\u5982\u679C\u90FD\u6CA1\u6709\u586B\u5199\u5219\u6CA1\u6CD5\u627E\u56DE\u5BC6\u7801\u3002",type:"warning",style:{marginBottom:24},showIcon:!0}),(0,e.jsxs)(D.L,{current:Q,onCurrentChange:J,submitter:{render:function(s,r){return s.step===2?null:r}},children:[(0,e.jsxs)(D.L.StepForm,{title:"\u586B\u5199\u627E\u56DE\u5BC6\u7801\u8D26\u53F7",initialValues:l,onFinish:function(){var _=(0,f.Z)((0,d.Z)().mark(function s(r){var i;return(0,d.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!(n!=null&&n.key)||j!="success")){t.next=3;break}return m.ZP.error("\u8BF7\u8FDB\u884C\u4EBA\u673A\u9A8C\u8BC1\u518D\u63D0\u4EA4"),t.abrupt("return",!1);case 3:if(r.key=n.key,!(r.name==l.name&&r.method==l.method)){t.next=6;break}return t.abrupt("return",!0);case 6:return t.prev=6,t.next=9,(0,h.yf)(r);case 9:return i=t.sent,z(i),t.abrupt("return",!0);case 14:t.prev=14,t.t0=t.catch(6),m.ZP.error("\u8BF7\u68C0\u67E5\u8F93\u5165\u662F\u5426\u6B63\u786E\uFF0C\u6216\u8005\u7A0D\u540E\u518D\u8BD5");case 17:return t.abrupt("return",!1);case 18:case"end":return t.stop()}},s,null,[[6,14]])}));return function(s){return _.apply(this,arguments)}}(),children:[(0,e.jsx)(E.Z,{label:"\u586B\u5199\u7528\u6237\u540D\u6216\u8005\u90AE\u7BB1",name:"name",rules:[{required:!0,message:"\u586B\u5199\u7528\u6237\u540D\u6216\u8005\u90AE\u7BB1"},function(){return{validator:function(s,r){return N.test(r)||V.test(r)?Promise.resolve():Promise.reject(new Error("\u7528\u6237\u540D\u6216\u8005\u90AE\u7BB1\u65E0\u6548"))}}}],placeholder:"\u586B\u5199\u7528\u6237\u540D\u6216\u8005\u90AE\u7BB1"}),(0,e.jsx)(L.Z,{label:"\u627E\u56DE\u5BC6\u7801\u65B9\u5F0F",name:"method",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u627E\u56DE\u5BC6\u7801\u65B9\u5F0F"}],valueEnum:{email:"\u53D1\u9001\u90AE\u4EF6",answer:"\u95EE\u9898\u7B54\u6848"}}),(0,e.jsx)("div",{style:{marginBottom:25},children:(0,e.jsx)(b.Z,{value:j,width:"100%",height:"50px",imageBase64:n==null?void 0:n.image,thumbBase64:n==null?void 0:n.thumb,changeValue:function(s){return v(s)},confirm:ee,refresh:q})})]}),(0,e.jsxs)(D.L.StepForm,{title:"\u586B\u5199\u9A8C\u8BC1\u4FE1\u606F",initialValues:l,onFinish:function(){var _=(0,f.Z)((0,d.Z)().mark(function s(r){return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,delete r.confirm,r.name=l.name,r.method=l.method,r.key=l.key,a.next=7,(0,h.QW)(r);case 7:return a.abrupt("return",!0);case 10:a.prev=10,a.t0=a.catch(0),m.ZP.error("\u8BF7\u6C42\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165\u662F\u5426\u6B63\u786E\uFF0C\u6216\u8005\u7A0D\u540E\u518D\u8BD5");case 13:return a.abrupt("return",!1);case 14:case"end":return a.stop()}},s,null,[[0,10]])}));return function(s){return _.apply(this,arguments)}}(),children:[l.method=="email"?(0,e.jsxs)("div",{className:o().result,children:[(0,e.jsx)(O.Z,{style:{marginBottom:24},message:(0,e.jsxs)(C,{children:["\u9A8C\u8BC1\u7801\u5DF2\u7ECF\u53D1\u5230\u60A8\u7684\u90AE\u7BB1\uFF1A",(0,e.jsx)(C,{strong:!0,children:l.email}),"\uFF0C\u8BF7\u6CE8\u610F\u67E5\u6536"]}),type:"success"}),(0,e.jsx)(E.Z,{label:"\u586B\u5199\u90AE\u4EF6\u9A8C\u8BC1\u7801",name:"code",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u90AE\u4EF6\u9A8C\u8BC1\u7801"}],placeholder:"\u8BF7\u586B\u5199\u90AE\u4EF6\u9A8C\u8BC1\u7801"})]}):(0,e.jsxs)("div",{className:o().result,children:[(0,e.jsx)(O.Z,{style:{marginBottom:24},message:(0,e.jsxs)(C,{children:["\u60A8\u7684\u5BC6\u4FDD\u95EE\u9898\u662F\uFF1A",(0,e.jsx)(C,{strong:!0,children:l.question})]})}),(0,e.jsx)(E.Z,{label:"\u586B\u5199\u5BC6\u4FDD\u7B54\u6848",name:"answer",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u4FDD\u7B54\u6848"}],placeholder:"\u8BF7\u586B\u5199\u5BC6\u4FDD\u7B54\u6848"})]}),(0,e.jsx)(E.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"new_pwd",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"}]}),(0,e.jsx)(E.Z.Password,{name:"confirm",dependencies:["new_pwd"],placeholder:"\u786E\u8BA4\u65B0\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},function(_){var s=_.getFieldValue;return{validator:function(i,a){return!a||s("new_pwd")===a?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]})]}),(0,e.jsx)(D.L.StepForm,{title:"\u5B8C\u6210",children:(0,e.jsx)($,{onFinish:(0,f.Z)((0,d.Z)().mark(function _(){return(0,d.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:M.m8.push("/user/login");case 1:case"end":return r.stop()}},_)}))})})]})]})}),(0,e.jsx)(W.Z,{})]})};p.default=G}}]);
